# Исправить бесконечный цикл обновлений в компоненте чата

## Описание
В приложении чата возникала ошибка "Maximum update depth exceeded", что указывало на бесконечный цикл обновлений в React-компонентах. Ошибка была связана с библиотеками @assistant-ui/react и @assistant-ui/react-ai-sdk, которые взаимодействуют с состоянием приложения.

## Тип задачи
bug

## Приоритет
high

## Статус
done

## Дата создания
2024-06-29

## Дата начала
2024-06-29

## Дата завершения
2024-06-29

## Исполнитель
AI Assistant

## Зависимости
-

## План реализации
1. ✅ Изучить стек вызовов ошибки и определить компоненты, вызывающие бесконечный цикл
2. ✅ Проверить компоненты Thread и ThreadList в директории apps/chat/src/components/assistant-ui/
3. ✅ Идентифицировать проблемный код, который вызывает бесконечные обновления
4. ✅ Исправить проблему добавлением useMemo для предотвращения бесконечного цикла
5. ✅ Протестировать исправление
6. ✅ Обновить документацию в docs/tasks/bugs.md

## Выполненные действия
1. Добавлен useMemo в component/assistant-ui/thread.tsx для предотвращения излишних ререндеров:
   - Мемоизированы threadId и messages для избежания обновлений при каждом рендере
   - Обновлены зависимости в useCallback для handleSubmit

2. Оптимизирован component/assistant-ui/thread-list.tsx:
   - Мемоизирован массив threads для предотвращения ререндеров
   - Обновлены inline-обработчики событий

3. Документированы исправления:
   - Обновлен docs/tasks/bugs.md
   - Задача перемещена из in-progress в done

## Результат
Исправлена ошибка "Maximum update depth exceeded", приложение чата теперь работает корректно без циклов обновлений. 